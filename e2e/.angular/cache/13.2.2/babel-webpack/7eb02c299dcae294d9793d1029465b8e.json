{"ast":null,"code":"/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { closest } from '@material/dom/ponyfill';\nimport { MDCList } from '@material/list/component';\nimport { MDCListFoundation } from '@material/list/foundation';\nimport { MDCMenuSurface } from '@material/menu-surface/component';\nimport { MDCMenuSurfaceFoundation } from '@material/menu-surface/foundation';\nimport { cssClasses, strings } from './constants';\nimport { MDCMenuFoundation } from './foundation';\n\nvar MDCMenu =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(MDCMenu, _super);\n\n  function MDCMenu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MDCMenu.attachTo = function (root) {\n    return new MDCMenu(root);\n  };\n\n  MDCMenu.prototype.initialize = function (menuSurfaceFactory, listFactory) {\n    if (menuSurfaceFactory === void 0) {\n      menuSurfaceFactory = function (el) {\n        return new MDCMenuSurface(el);\n      };\n    }\n\n    if (listFactory === void 0) {\n      listFactory = function (el) {\n        return new MDCList(el);\n      };\n    }\n\n    this.menuSurfaceFactory_ = menuSurfaceFactory;\n    this.listFactory_ = listFactory;\n  };\n\n  MDCMenu.prototype.initialSyncWithDOM = function () {\n    var _this = this;\n\n    this.menuSurface_ = this.menuSurfaceFactory_(this.root_);\n    var list = this.root_.querySelector(strings.LIST_SELECTOR);\n\n    if (list) {\n      this.list_ = this.listFactory_(list);\n      this.list_.wrapFocus = true;\n    } else {\n      this.list_ = null;\n    }\n\n    this.handleKeydown_ = function (evt) {\n      return _this.foundation_.handleKeydown(evt);\n    };\n\n    this.handleItemAction_ = function (evt) {\n      return _this.foundation_.handleItemAction(_this.items[evt.detail.index]);\n    };\n\n    this.handleMenuSurfaceOpened_ = function () {\n      return _this.foundation_.handleMenuSurfaceOpened();\n    };\n\n    this.menuSurface_.listen(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, this.handleMenuSurfaceOpened_);\n    this.listen('keydown', this.handleKeydown_);\n    this.listen(MDCListFoundation.strings.ACTION_EVENT, this.handleItemAction_);\n  };\n\n  MDCMenu.prototype.destroy = function () {\n    if (this.list_) {\n      this.list_.destroy();\n    }\n\n    this.menuSurface_.destroy();\n    this.menuSurface_.unlisten(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, this.handleMenuSurfaceOpened_);\n    this.unlisten('keydown', this.handleKeydown_);\n    this.unlisten(MDCListFoundation.strings.ACTION_EVENT, this.handleItemAction_);\n\n    _super.prototype.destroy.call(this);\n  };\n\n  Object.defineProperty(MDCMenu.prototype, \"open\", {\n    get: function () {\n      return this.menuSurface_.isOpen();\n    },\n    set: function (value) {\n      if (value) {\n        this.menuSurface_.open();\n      } else {\n        this.menuSurface_.close();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCMenu.prototype, \"wrapFocus\", {\n    get: function () {\n      return this.list_ ? this.list_.wrapFocus : false;\n    },\n    set: function (value) {\n      if (this.list_) {\n        this.list_.wrapFocus = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCMenu.prototype, \"items\", {\n    /**\n     * Return the items within the menu. Note that this only contains the set of elements within\n     * the items container that are proper list items, and not supplemental / presentational DOM\n     * elements.\n     */\n    get: function () {\n      return this.list_ ? this.list_.listElements : [];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCMenu.prototype, \"quickOpen\", {\n    set: function (quickOpen) {\n      this.menuSurface_.quickOpen = quickOpen;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Sets default focus state where the menu should focus every time when menu\n   * is opened. Focuses the list root (`DefaultFocusState.LIST_ROOT`) element by\n   * default.\n   * @param focusState Default focus state.\n   */\n\n  MDCMenu.prototype.setDefaultFocusState = function (focusState) {\n    this.foundation_.setDefaultFocusState(focusState);\n  };\n  /**\n   * @param corner Default anchor corner alignment of top-left menu corner.\n   */\n\n\n  MDCMenu.prototype.setAnchorCorner = function (corner) {\n    this.menuSurface_.setAnchorCorner(corner);\n  };\n\n  MDCMenu.prototype.setAnchorMargin = function (margin) {\n    this.menuSurface_.setAnchorMargin(margin);\n  };\n  /**\n   * Sets the list item as the selected row at the specified index.\n   * @param index Index of list item within menu.\n   */\n\n\n  MDCMenu.prototype.setSelectedIndex = function (index) {\n    this.foundation_.setSelectedIndex(index);\n  };\n  /**\n   * Sets the enabled state to isEnabled for the menu item at the given index.\n   * @param index Index of the menu item\n   * @param isEnabled The desired enabled state of the menu item.\n   */\n\n\n  MDCMenu.prototype.setEnabled = function (index, isEnabled) {\n    this.foundation_.setEnabled(index, isEnabled);\n  };\n  /**\n   * @return The item within the menu at the index specified.\n   */\n\n\n  MDCMenu.prototype.getOptionByIndex = function (index) {\n    var items = this.items;\n\n    if (index < items.length) {\n      return this.items[index];\n    } else {\n      return null;\n    }\n  };\n\n  MDCMenu.prototype.setFixedPosition = function (isFixed) {\n    this.menuSurface_.setFixedPosition(isFixed);\n  };\n\n  MDCMenu.prototype.setIsHoisted = function (isHoisted) {\n    this.menuSurface_.setIsHoisted(isHoisted);\n  };\n\n  MDCMenu.prototype.setAbsolutePosition = function (x, y) {\n    this.menuSurface_.setAbsolutePosition(x, y);\n  };\n  /**\n   * Sets the element that the menu-surface is anchored to.\n   */\n\n\n  MDCMenu.prototype.setAnchorElement = function (element) {\n    this.menuSurface_.anchorElement = element;\n  };\n\n  MDCMenu.prototype.getDefaultFoundation = function () {\n    var _this = this; // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n    // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n    // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n\n\n    var adapter = {\n      addClassToElementAtIndex: function (index, className) {\n        var list = _this.items;\n        list[index].classList.add(className);\n      },\n      removeClassFromElementAtIndex: function (index, className) {\n        var list = _this.items;\n        list[index].classList.remove(className);\n      },\n      addAttributeToElementAtIndex: function (index, attr, value) {\n        var list = _this.items;\n        list[index].setAttribute(attr, value);\n      },\n      removeAttributeFromElementAtIndex: function (index, attr) {\n        var list = _this.items;\n        list[index].removeAttribute(attr);\n      },\n      elementContainsClass: function (element, className) {\n        return element.classList.contains(className);\n      },\n      closeSurface: function (skipRestoreFocus) {\n        return _this.menuSurface_.close(skipRestoreFocus);\n      },\n      getElementIndex: function (element) {\n        return _this.items.indexOf(element);\n      },\n      notifySelected: function (evtData) {\n        return _this.emit(strings.SELECTED_EVENT, {\n          index: evtData.index,\n          item: _this.items[evtData.index]\n        });\n      },\n      getMenuItemCount: function () {\n        return _this.items.length;\n      },\n      focusItemAtIndex: function (index) {\n        return _this.items[index].focus();\n      },\n      focusListRoot: function () {\n        return _this.root_.querySelector(strings.LIST_SELECTOR).focus();\n      },\n      isSelectableItemAtIndex: function (index) {\n        return !!closest(_this.items[index], \".\" + cssClasses.MENU_SELECTION_GROUP);\n      },\n      getSelectedSiblingOfItemAtIndex: function (index) {\n        var selectionGroupEl = closest(_this.items[index], \".\" + cssClasses.MENU_SELECTION_GROUP);\n        var selectedItemEl = selectionGroupEl.querySelector(\".\" + cssClasses.MENU_SELECTED_LIST_ITEM);\n        return selectedItemEl ? _this.items.indexOf(selectedItemEl) : -1;\n      }\n    }; // tslint:enable:object-literal-sort-keys\n\n    return new MDCMenuFoundation(adapter);\n  };\n\n  return MDCMenu;\n}(MDCComponent);\n\nexport { MDCMenu }; //# sourceMappingURL=component.js.map","map":null,"metadata":{},"sourceType":"module"}